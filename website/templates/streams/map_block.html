

{% load wagtailadmin_tags wagtailcore_tags wagtailimages_tags coderedcms_tags %}




<head>

<script src="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.css" rel="stylesheet" />
</head>


<style>
    #map {

    width: 100%;
    height: 85vh;

}

        .mapboxgl-popup {
            max-width: 100%;




        }
        .mapboxgl-popup-tip{


        }
        .mapboxgl-popup-content{

            background-color: transparent;
            border: none;
            box-shadow: none;
            margin: 0;
            padding: 0;

        }

        .mapboxgl-popup-content-wrapper{
            color: red;

            background-color: blue;
        }
        .mapboxgl-popup-close-button{
            display: none;
        }
        .mapboxgl-popup-anchor-top .mapboxgl-popup-tip,
        .mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,
        .mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip {
            border-bottom-color: #222222;
            }
        .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,
        .mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,
        .mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip {
            border-top-color: #222222;
            }
        .mapboxgl-popup-anchor-left .mapboxgl-popup-tip {
            border-right-color: #222222;
            }
        .mapboxgl-popup-anchor-right .mapboxgl-popup-tip {
            border-left-color: #222222;
            }
    #menu {


        padding: 10px;
        align-content: center;
        align-content: center;

        }


    </style>


<div class="container-fluid justify-content-center m-0 p-0"   >

    <div class="container">






    </div>

    <div class ="container-fluid justify-content-center text-center m-0 p-0" >
        <div class ="container-fluid justify-content-center m-0 text-center"  id="menu" >

            <input id="light-v10" type="button" class="btn btn-dark" name="rtoggle" value="light" checked="checked" />

            <input id="dark-v10" type="button" class="btn btn-dark" name="rtoggle" value="dark" />

            <input id="outdoors-v11" type="button" class="btn btn-dark" name="rtoggle" value="outdoors" />

            <input id="satellite-v9" type="button" class="btn btn-dark" name="rtoggle" value="satellite" />

            </div>

        <div class = " " id='map'  ></div>





                    <script>
                    mapboxgl.accessToken = "{{ settings.site_settings.MapboxApiApiSettings.mapbox_maps_api_key }}";
                     var map = new mapboxgl.Map({
                        container: 'map',
                        style: 'mapbox://styles/mapbox/light-v10',
                        center: [9,61],
                        zoom: 5
                    });

                     {% for post in posts %}
                    {% if post.lat and post.lng and post.cover_image %}
                        {% image post.cover_image fill-2000x1000 as cover_image %}
                        var marker = new mapboxgl.Marker({color: "#FF0000"})
                            .setLngLat([{{ post.lng }},{{ post.lat }}])
                            .setPopup(new mapboxgl.Popup().setHTML("<a  style =' ;text-decoration: none !important; margin: 0 !important; padding: 0 !important; color: white !important;  '  href=\"{{post.url}}\"  <div class=\"card bg-dark m-0 p-0 text-light border-0\" style=\"width: 100%; color: white; margin: 0 !important; padding: 0 !important; \">\n" +
                                "  <img src=\"{{ cover_image.url }}\" class=\"card-img-top\" alt=\"...\">\n" +
                                "  <div class=\"card-body\">\n" +
                                "    <h5 class=\"card-title \">{{post.title}}</h5>\n" +
                                "    <p class=\"card-text\">{{ post.caption }}</p>\n" +

                                "  </div>\n" +
                                "</div> </a>"
                            ))
                            .addTo(map);
                    {% endif %}
                    {% endfor %}









                    map.addControl(new mapboxgl.FullscreenControl());

                    var layerList = document.getElementById('menu');
                    var inputs = layerList.getElementsByTagName('input');

                    function switchLayer(layer) {
                    var layerId = layer.target.id;
                    map.setStyle('mapbox://styles/mapbox/' + layerId);
                    }

                    for (var i = 0; i < inputs.length; i++) {
                    inputs[i].onclick = switchLayer;
                    }




                    </script>


    </div>






</div>
